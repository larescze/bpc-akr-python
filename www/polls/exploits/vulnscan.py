import shodan
from django.http import HttpResponse

SHODAN_API_KEY = "eY6WEXyeE95XcmlQjARZZ4u6aO6xJGcF"

api = shodan.Shodan(SHODAN_API_KEY)

def search():
    # Wrap the request in a try/ except block to catch errors
    try:
        # Search Shodan
        results = api.search('SQL Injection', page=1, limit=25)
        """
        # Show the results
        html += '<p>Results found: {}</p>'.format(results['total'])
        for result in results['matches']:
            html += '<p>Exploit ID: {}</p>'.format(result['_id'])
            html += '<p>Source: {}</p>'.format(result['source'])
            html += '<p>Description: {}</p>'.format(result['description'])
            html += '<br>'
        """
    except shodan.APIError as e:
        results = 'Error: {}'.format(e)
    finally:
        return results

